<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      Time Tracking System
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="state$ | async as state">
  <!--  TODO: This content could be in separate component which relays to the perform activity-->
  <div *ngIf="isPerform(state.status)">
    <app-perform [state]="state"></app-perform>
  </div>
</ion-content>

<ion-footer>
  <ion-toolbar *ngIf="state$ | async as state">
    <ion-input
      #activityTypeInput
      *ngIf="isIdle(state.status) || activityTypeVisibility"
      [(ngModel)]="activityType"
      class="custom-type-input"
      clear-input="true"
      placeholder="Enter new activity type"
      (keyup.enter)="handleActivityButtonClick(state.status, activityType)"
    >
    </ion-input>

    <app-type-selector
      [types]="types$ | async"
      (typeSelect)="handleActivityButtonClick(state.status, $event)"
    ></app-type-selector>

    <div class="footer-btns-container">
      <ion-button
        class="activity-toggle"
        [ngClass]="isIdle(state.status) ? 'fullwidth-activity-toggle' : ''"
        color="dark"
        fill="solid"
        expand="full"
        [disabled]="!activityType && !isPerform(state.status)"
        (click)="handleActivityButtonClick(state.status)"
      >
        {{ getActionButtonText(state.status) }}
      </ion-button>
      <ion-button
        class="activity-search-toggle"
        *ngIf="isPerform(state.status)"
        color="dark"
        expand="full"
        (click)="toggleTypeInputVisibility()"
      >
        <ion-icon name="create"></ion-icon>
      </ion-button>
    </div>

    <ion-progress-bar *ngIf="false" type="indeterminate"></ion-progress-bar>
  </ion-toolbar>
</ion-footer>
